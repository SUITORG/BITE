<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Suit.Org & Suit.Bite | La soluci√≥n SaaS definitiva. Digitaliza tu empresa o negocio de comida con Punto de Venta, Pedidos Web y Chatbots inteligentes.">
    <meta name="keywords"
        content="Suit.Org, Suit.Bite, pedidos online monterrey, sistema para restaurantes, saas para pymes, tacos a domicilio m√©xico, software de ventas online">
    <title>Suit.Org | Suit.Bite - Ecosistema Digital y Pedidos Online</title>
    <link rel="stylesheet" href="style.css?v=4.6.9">


    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Chart.js for Business Dashboard -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <!-- Backend Version Indicator -->
    <!-- estandar-barra-st (System Info) -->
    <div id="status-bar" class="status-bar">
        <div class="sb-left">
            <span id="sb-indicator"><i class="fa-solid fa-microchip"></i> BS-T:</span>
            <span class="divider">|</span>
            <span id="sb-user"><i class="fa-solid fa-user"></i> Visitante</span>
            <span class="divider">|</span>
            <span id="sb-level" title="Nivel de Acceso">0</span>
        </div>
        <!-- CENTER: Logic Console -->
        <div class="sb-console" id="sb-console" title="Doble clic para ver logs" ondblclick="app.ui.runConsoleSim()">
            <span class="console-dot"></span>
            <span class="console-text" id="console-text">> SYSTEM READY</span>
        </div>
        <div class="sb-right">
            <span id="gs-version-text" style="font-size:0.75rem; margin-right:8px; opacity:0.6;">V: --</span>
            <span id="sb-date" style="font-weight: bold; margin-right: 5px;"></span>
            <span id="sb-time" style="opacity: 0.8; margin-right: 15px;"></span>
            <span id="sb-credits"></span>
        </div>
    </div>
    <!-- MAIN HEADER (Dynamic) -->
    <header id="main-header">
        <div class="logo-area">
            <!-- WhatsApp Floating Button (Moved to Header) -->
            <a href="https://wa.me/" id="whatsapp-float" class="whatsapp-float" target="_blank"
                title="Cont√°ctanos por WhatsApp">
                <i class="fab fa-whatsapp"></i>
                <span>WhatsApp</span>
            </a>
            <div id="logo-container" class="logo-container hidden">
                <img src="" alt="Logo" id="header-logo">
            </div>
            <h1 id="header-title">SuitOrg</h1>
        </div>
        <nav id="nav-menu">
            <!-- Hamburger Icon (Mobile) -->
            <button id="menu-toggle" class="menu-toggle" aria-label="Abrir men√∫">
                <i class="fas fa-bars"></i>
            </button>
            <!-- Public Menu -->
            <ul id="menu-public" class="nav-list">
                <li><a href="#orbit"><i class="fas fa-planet-ring"></i> Hub</a></li>
                <li><a href="#home">Inicio</a></li>
                <li><a href="#food-app-area" class="btn-express-nav">
                        <i class="fas fa-utensils"></i> PEDIDO EXPRESS
                    </a>
                </li>
                <li><a href="#contact">Contacto</a></li>
                <li><a href="#login" id="btn-login-trigger" onclick="app.ui.showLogin(); return false;"><i
                            class="fas fa-user-lock"></i> Staff</a>
                </li>
            </ul>
            <!-- Staff Menu (Hidden by default) -->
            <ul id="menu-staff" class="nav-list hidden">
                <li><a href="#pos"><i class="fas fa-desktop"></i> Monitor</a></li>
                <li><a href="#catalog"><i class="fas fa-box"></i> Cat√°logo</a></li>
                <li><a href="#leads">Leads</a></li>
                <li><a href="#projects">Proyectos</a></li>
                <li><a href="#staff-pos">Venta (POS)</a></li>
                <li><a href="#knowledge">Conocimiento</a></li>
                <li><a href="#reports" id="nav-reports"><i class="fas fa-chart-line"></i> Reportes</a></li>
                <li class="nav-item role-admin hidden"><a href="#quotas" onclick="app.ui.showView('view-quotas')"><i
                            class="fas fa-credit-card"></i> Cuotas</a></li>
                <li class="nav-item"><a href="#logout" onclick="app.auth.logout()"><i class="fas fa-sign-out-alt"></i>
                        Salir</a></li>
            </ul>
        </nav>
        <!-- Mobile Menu Overlay (Premium Glassmorphism) -->
        <div id="mobile-menu-overlay" class="mobile-menu-overlay hidden"></div>
    </header>
    <!-- MAIN CONTENT AREA -->
    <main id="app-content">
        <!-- Orbit Hub View (Disruptive Landing) -->
        <section id="view-orbit-old" class="view-section hidden"
            style="position: relative; width: 100%; height: 100vh; overflow: hidden; background: #000;">
            <div id="orbit-bubbles-old" style="position: relative; width: 100%; height: 100%;"></div>
        </section>

        <!-- SECTION: HOME / LANDING -->

        <section id="view-home" class="view-section hidden">
            <div class="hero-banner" id="hero-banner-main">
                <h2 id="hero-slogan">Energ√≠a limpia para un futuro sostenible</h2>
                <p id="hero-sub">Soluciones integrales para tu hogar y negocio.</p>
                <div id="hero-actions-container" class="hero-actions">
                    <!-- Buttons injected via JS -->
                    <button class="btn-primary" onclick="window.location.hash='#contact'">Cotizar Ahora</button>
                </div>
                <div id="hero-extra-msg" class="hero-extra-msg"></div>
            </div>

            <!-- SECTION: SPECIALIZED SOLUTIONS (Long-Tail SEO) - UNIVERSAL POSITION -->
            <!-- This container must be visible for ALL company types if data exists -->
            <div id="seo-matrix-section" class="specialized-solutions hidden"
                style="margin-bottom: 40px; padding: 40px 20px; background: rgba(0,0,0,0.03); border-radius: 12px; clear: both;">
                <h2 id="seo-main-title" style="text-align: center; margin-bottom: 10px; color: var(--primary-color);">
                    Soluciones Especializadas</h2>
                <p id="seo-main-sub" style="text-align: center; margin-bottom: 30px; opacity: 0.7;">Descubre lo que
                    podemos hacer por ti.</p>

                <div class="solutions-grid seo-grid">
                    <!-- Dynamically populated from Config_SEO table -->
                </div>
            </div>



            <!-- Standard features for other companies (Hidden if food) -->
            <div id="standard-features-grid" class="features-grid hidden">
                <!-- Secciones de empresas anteriores removidas por limpieza de c√≥digo -->
        </section>

        <!-- SECTION: EXPRESS ORDER (Suit.Bite) -->
        <section id="view-express" class="view-section hidden" style="padding: 20px 0;">
            <!-- PFM / FOOD SPECIALIZED AREA -->
            <div id="food-app-area" class="food-container">
                <div class="food-header">
                    <h2 id="food-menu-title">Nuestro Men√∫</h2>
                    <p id="food-menu-subtitle">Selecciona tus favoritos y haz tu pedido en segundos.</p>
                </div>
                <!-- Food Search & Navigation -->
                <div class="food-nav-container" style="margin-bottom: 20px;">
                    <div class="food-search-box" style="position: relative; margin-bottom: 20px;">
                        <i class="fas fa-search"
                            style="position: absolute; left: 15px; top: 50%; transform: translateY(-50%); color: #999;"></i>
                        <input type="text" id="food-search-input" placeholder="Buscar productos..."
                            style="width: 100%; padding: 12px 15px 12px 45px; border-radius: 50px; border: 1px solid #eee; font-size: 1rem; outline: none; box-shadow: 0 4px 10px rgba(0,0,0,0.05);">
                    </div>
                    <div id="food-category-tabs" class="food-tabs"
                        style="display: flex; gap: 10px; overflow-x: auto; padding-bottom: 10px; scrollbar-width: none;">
                        <!-- Category tabs injected via JS -->
                    </div>
                </div>
                <div id="food-menu-grid" class="food-grid-container"></div>
                <!-- Floating Cart Bar -->
                <div id="cart-float-bar" class="cart-bar">
                    <div class="cart-bar-content">
                        <div class="cart-info">
                            <i class="fas fa-shopping-basket"></i>
                            <span id="cart-count-badge" class="badge hidden">0</span>
                            <span class="total-label">Total:</span>
                            <span id="cart-total">$0.00</span>
                        </div>
                        <div class="cart-btns">
                            <button onclick="app.pos.clearCart()" class="btn-clear"><i class="fas fa-trash-alt"></i>
                                Limpiar</button>
                            <button onclick="app.pos.openCheckout()" class="btn-checkout"><i
                                    class="fas fa-paper-plane"></i> Pedir</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- SECTION: STRATEGIC PILLARS (Standalone View) -->
        <section id="view-pillars" class="view-section about-section hidden">
            <div class="section-header">
                <h2>Pilares Estrat√©gicos de EVASOL</h2>
                <p>Nuestra identidad y camino se cimentan sobre cuatro pilares fundamentales.</p>
            </div>
            <div class="pillars-grid" id="pillars-container">
                <!-- Dynamic Pillars will be rendered here by JS -->
            </div>
        </section>
        <!-- SECTION: DASHBOARD (Staff Only) -->
        <section id="view-dashboard" class="view-section hidden">
            <h2>Panel de Control</h2>
            <div class="dashboard-stats">
                <div class="stat-card">
                    <h3>Cr√©ditos Restantes</h3>
                    <p id="dash-credits" class="big-number">--</p>
                    <span id="dash-credit-mode" style="font-size:0.75rem; opacity:0.8;">Cargando modo...</span>
                </div>
                <div class="stat-card">
                    <h3>Leads Nuevos</h3>
                    <p id="dash-leads" class="big-number">0</p>
                </div>
                <!-- God Mode Tools -->
                <div id="god-tools" class="stat-card hidden" style="border-color: gold;">
                    <h3>GOD MODE</h3>
                    <div style="display:flex; gap:10px; justify-content:center; margin-top:10px;">
                        <button id="btn-dash-maintenance" class="btn-primary"
                            onclick="alert('Mantenimiento DB: OK')">Mantenimiento</button>
                        <button id="btn-dash-agents" class="btn-primary" onclick="app.ui.openAgentsModal()"
                            style="background: linear-gradient(45deg, #d4af37, #f7d794); color:#000;">ü§ñ Agentes
                            AI</button>
                    </div>
                </div>
                <!-- Maintenance Admin Buttons -->
                <div id="admin-maintenance-tools" class="hidden"
                    style="display:flex; gap:10px; justify-content:center; margin-top:10px; grid-column: span 2; flex-wrap: wrap;">
                    <button class="btn-small btn-danger" onclick="app.maintenance.resetCompany()">Reset Empresa</button>
                    <button id="admin-tool-repair-db" class="btn-small btn-warning" onclick="app.ui.repairDatabase()"><i
                            class="fas fa-tools"></i>
                        Reparar DB</button>
                    <button class="btn-small" style="background:#6a1b9a; color:white;"
                        onclick="app.agents.diagnoseAi()"><i class="fas fa-stethoscope"></i> Diagnosticar IA</button>
                    <button id="admin-tool-logs" class="btn-small" onclick="app.maintenance.viewLogs()">Ver
                        Logs</button>
                </div>
            </div>
            <!-- Dashboard Modular Actions -->
            <div class="features-grid" style="margin-top: 30px;">
                <div class="feature-card" onclick="window.location.hash='#pos'">
                    <i class="fas fa-desktop" style="background:#e3f2fd; color:#1976d2;"></i>
                    <h3>Monitor Pedidos</h3>
                    <p>Gestionar entregas y estatus de cocina.</p>
                    <button class="btn-primary w-100" onclick="window.location.hash='#pos'">Ir al Monitor</button>
                </div>
                <div class="feature-card" onclick="window.location.hash='#catalog'">
                    <i class="fas fa-box" style="background:#fce4ec; color:#c2185b;"></i>
                    <h3>Cat√°logo</h3>
                    <p>Administrar productos y servicios.</p>
                    <button class="btn-primary w-100" onclick="window.location.hash='#catalog'">Ver Cat√°logo</button>
                </div>
                <div class="feature-card" onclick="window.location.hash='#projects'">
                    <i class="fas fa-tasks" style="background:#e8f5e9; color:#2e7d32;"></i>
                    <h3>Proyectos</h3>
                    <p>Administraci√≥n general de √≥rdenes.</p>
                    <button class="btn-primary w-100" onclick="window.location.hash='#projects'">Ver Tabla</button>
                </div>
                <div class="feature-card" onclick="window.location.hash='#staff-pos'">
                    <i class="fas fa-cash-register" style="background:#fff3e0; color:#ef6c00;"></i>
                    <h3>Caja POS</h3>
                    <p>Realizar ventas directas en mostrador.</p>
                    <button class="btn-primary w-100" onclick="window.location.hash='#staff-pos'">Abrir Caja</button>
                </div>
            </div>
        </section>
        <!-- SECTION: LEADS (Staff Only) -->
        <section id="view-leads" class="view-section hidden">
            <div class="section-header">
                <h2>Gesti√≥n de Leads</h2>
                <button class="btn-primary" id="btn-show-lead-modal" onclick="app.ui.openLeadModal()">
                    <i class="fas fa-plus-circle"></i> Nuevo Lead
                </button>
            </div>
            <!-- TABLE CONTROLS -->
            <div class="table-controls">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="lead-search" placeholder="Buscar prospectos..."
                        oninput="app.ui.renderLeads()">
                </div>
                <div style="display: flex; gap: 10px; align-items: center;">
                    <div class="export-actions">
                        <button class="btn-small btn-export-pdf" onclick="app.ui.exportTable('Leads', 'PDF')"
                            title="Exportar a PDF">
                            <i class="fas fa-file-pdf"></i>
                        </button>
                        <button class="btn-small btn-export-vts" onclick="app.ui.exportTable('Leads', 'VTS')"
                            title="Exportar a VTS">
                            <i class="fas fa-file-csv"></i>
                        </button>
                    </div>
                    <button class="btn-refresh" title="Refrescar Datos" onclick="app.ui.refreshData('leads')">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                </div>
            </div>
            <div class="table-responsive">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Prospecto Nombre</th>
                            <th>Direcci√≥n</th>
                            <th>Tel√©fono</th>
                            <th>Estado</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="leads-table-body">
                        <!-- JS renders rows here -->
                    </tbody>
                </table>
            </div>
        </section>
        <!-- SECTION: PROJECTS (Staff Only) -->
        <section id="view-projects" class="view-section hidden">
            <div class="section-header">
                <h2>Proyectos en Curso</h2>
                <button class="btn-primary" id="btn-show-project-modal" onclick="app.ui.openProjectModal()">
                    <i class="fas fa-hammer"></i> Nuevo Proyecto
                </button>
            </div>
            <!-- TABLE CONTROLS -->
            <div class="table-controls">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="project-search" placeholder="Buscar proyectos..."
                        oninput="app.ui.renderProjects()">
                </div>
                <div style="display: flex; gap: 10px; align-items: center;">
                    <div class="export-actions">
                        <button class="btn-small btn-export-pdf" onclick="app.ui.exportTable('Proyectos', 'PDF')"
                            title="Exportar a PDF">
                            <i class="fas fa-file-pdf"></i>
                        </button>
                        <button class="btn-small btn-export-vts" onclick="app.ui.exportTable('Proyectos', 'VTS')"
                            title="Exportar a VTS">
                            <i class="fas fa-file-csv"></i>
                        </button>
                    </div>
                    <button class="btn-refresh" title="Refrescar Datos" onclick="app.ui.refreshData('projects')">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                </div>
            </div>
            <div class="table-responsive">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Proyecto</th>
                            <th>Cliente</th>
                            <th>Inicio</th>
                            <th>Estado</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="projects-table-body">
                        <!-- JS renders rows here -->
                    </tbody>
                </table>
            </div>
        </section>
        <!-- SECTION: KNOWLEDGE BASE (Staff Only) -->
        <section id="view-knowledge" class="view-section hidden">
            <div class="section-header">
                <h2><i class="fas fa-book-open"></i> Base de Conocimientos</h2>
                <div class="actions">
                    <button class="btn-primary" id="btn-sync-drive" onclick="app.ui.syncKnowledge()">
                        <i class="fas fa-sync"></i> Sincronizar Drive
                    </button>
                    <button class="btn-secondary" onclick="app.ui.openKnowledgeModal()">
                        <i class="fas fa-plus-circle"></i> Cargar Foto / Texto
                    </button>
                </div>
            </div>
            <div class="card glass">
                <p class="text-small" style="margin-bottom:15px; opacity:0.8;">Documentos sincronizados desde Google
                    Drive.</p>
                <div id="knowledge-list" class="knowledge-grid">
                    <!-- Dynamic docs here -->
                </div>
            </div>
        </section>
        <!-- SECTION: STAFF POS (PFM Internal Sales) -->
        <section id="view-staff-pos" class="view-section hidden">
            <div class="pos-layout">
                <!-- Left Side: Category Navigator -->
                <div class="pos-nav" id="staff-pos-side-nav-container">
                    <!-- Discrete External Orders Alert -->
                    <!-- Discrete External Orders Alert (Split Layout v4.6.0 - 3 Buttons) -->
                    <!-- Discrete External Orders Alert (Split Layout v4.5.2) -->
                    <div id="pos-alerts-container" class="hidden"
                        style="display:flex; flex-direction:column; gap:8px; margin-bottom:15px; cursor:pointer;"
                        onclick="window.location.hash='#pos'">
                        <!-- Box 1: Nuevos (Blue) -->
                        <div id="pos-external-alert" class="pos-external-box"
                            style="margin:0; background: linear-gradient(135deg, #1e3c72, #2a5298); border:none;">
                            <div class="pos-external-header" style="justify-content:space-between;">
                                <div style="display:flex; align-items:center; gap:8px;">
                                    <i class="fas fa-cloud-download-alt"></i>
                                    <span style="font-size:0.7rem;">NUEVOS WEB</span>
                                </div>
                                <div id="pos-external-count" class="pos-external-badge"
                                    style="background:rgba(255,255,255,0.2); position:static;">0</div>
                            </div>
                        </div>
                        <!-- Box 2: Por Entregar (Orange) -->
                        <div id="pos-delivery-alert" class="pos-external-box"
                            style="margin:0; background: linear-gradient(135deg, #e65100, #ff9800); border:none;">
                            <div class="pos-external-header" style="justify-content:space-between;">
                                <div style="display:flex; align-items:center; gap:8px;">
                                    <i class="fas fa-motorcycle"></i>
                                    <span style="font-size:0.7rem;">POR ENTREGAR</span>
                                </div>
                                <div id="pos-delivery-count" class="pos-external-badge"
                                    style="background:rgba(255,255,255,0.2); position:static;">0</div>
                            </div>
                        </div>
                        <!-- Box 3: Entregados (Green) -->
                        <div id="pos-done-alert" class="pos-external-box"
                            style="margin:0; background: linear-gradient(135deg, #2e7d32, #43a047); border:none;">
                            <div class="pos-external-header" style="justify-content:space-between;">
                                <div style="display:flex; align-items:center; gap:8px;">
                                    <i class="fas fa-check-circle"></i>
                                    <span style="font-size:0.7rem;">ENTREGADOS</span>
                                </div>
                                <div id="pos-done-count" class="pos-external-badge"
                                    style="background:rgba(255,255,255,0.2); position:static;">0</div>
                            </div>
                        </div>
                    </div>
                    <div id="staff-pos-side-nav" class="pos-nav-scroll">
                        <!-- Categories injected via JS -->
                    </div>
                </div>
                <!-- Middle: Product Grid -->
                <div class="pos-main">
                    <div class="section-header">
                        <h2><i class="fas fa-cash-register"></i> Cat√°logo de Venta</h2>
                    </div>
                    <div id="staff-pos-grid" class="food-grid">
                        <!-- Products rendered here -->
                    </div>
                </div>
                <!-- Right Side: Ticket Sidebar -->
                <div class="pos-sidebar" id="pos-ticket-sidebar">
                    <button class="close-ticket-btn" onclick="app.ui.toggleMobileTicket(false)"
                        style="display:none; position:absolute; top:15px; right:15px; border:none; background:none; font-size:1.5rem; color:#999; cursor:pointer; z-index:100;">
                        <i class="fas fa-times"></i>
                    </button>
                    <div class="ticket">
                        <div class="ticket-header">
                            <div class="ticket-header-logo">
                                <img src="" id="ticket-logo" style="max-width: 65px;" class="hidden">
                            </div>
                            <div class="ticket-header-info">
                                <h3>TICKET DE VENTA</h3>
                                <p id="ticket-date">--/--/----</p>
                            </div>
                        </div>
                        <div id="ticket-items" class="ticket-body">
                            <!-- Items auto-injected here -->
                            <p style="text-align: center; color: #999; padding: 20px;">Carrito vac√≠o</p>
                        </div>
                        <div class="ticket-footer">
                            <div class="ticket-row">
                                <span>Items:</span>
                                <span id="ticket-count">0</span>
                            </div>
                            <div class="ticket-row">
                                <span>SUBTOTAL:</span>
                                <span id="ticket-subtotal">$0.00</span>
                            </div>
                            <div id="staff-delivery-row" class="ticket-row hidden">
                                <span>ENV√çO:</span>
                                <span id="staff-delivery-fee">$0.00</span>
                            </div>
                            <div class="ticket-row total"
                                style="margin-top:5px; border-top: 2px solid #333; padding-top: 5px;">
                                <span>TOTAL:</span>
                                <span id="ticket-total">$0.00</span>
                            </div>
                        </div>
                        <!-- Customer Express Data for Staff üì¶ -->
                        <div class="pos-customer-data"
                            style="background: #f8f9fa; border: 1px solid #dee2e6; padding: 8px; border-radius: 8px; margin-bottom: 10px; margin-top: 10px;">
                            <h4
                                style="font-size: 0.7rem; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 5px; color: #6c757d;">
                                <i class="fas fa-shipping-fast"></i> Tipo de Entrega
                            </h4>
                            <div class="delivery-selector-mini" style="display: flex; gap: 5px; margin-bottom: 8px;">
                                <button class="delivery-opt-staff active" id="staff-delivery-pickup"
                                    onclick="app.pos.setDeliveryMethod('PICKUP')"
                                    style="flex:1; padding: 8px; font-size: 0.75rem; border: 1px solid #ddd; border-radius: 6px; background: white; cursor:pointer;">
                                    <i class="fas fa-store"></i> Local
                                </button>
                                <button class="delivery-opt-staff" id="staff-delivery-dom"
                                    onclick="app.pos.setDeliveryMethod('DOMICILIO')"
                                    style="flex:1; padding: 8px; font-size: 0.75rem; border: 1px solid #ddd; border-radius: 6px; background: white; cursor:pointer;">
                                    <i class="fas fa-truck"></i> Env√≠o
                                </button>
                            </div>
                            <h4
                                style="font-size: 0.7rem; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 5px; color: #6c757d;">
                                <i class="fas fa-user-tag"></i> Datos del Cliente
                            </h4>
                            <input type="text" id="pos-cust-name" placeholder="Nombre completo"
                                style="width: 100%; border: 1px solid #ced4da; border-radius: 4px; padding: 6px 10px; font-size: 0.85rem; margin-bottom: 8px;">
                            <input type="tel" id="pos-cust-phone" placeholder="WhatsApp (Ej: 521...)"
                                style="width: 100%; border: 1px solid #ced4da; border-radius: 4px; padding: 6px 10px; font-size: 0.85rem; margin-bottom: 8px;">
                            <input type="text" id="pos-cust-address" placeholder="Direcci√≥n de entrega"
                                style="width: 100%; border: 1px solid #ced4da; border-radius: 4px; padding: 6px 10px; font-size: 0.85rem; margin-bottom: 8px;">
                            <textarea id="pos-cust-notes" placeholder="Notas internas / especiales..."
                                style="width: 100%; border: 1px solid #ced4da; border-radius: 4px; padding: 6px 10px; font-size: 0.85rem; height: 40px; resize: none;"></textarea>
                        </div>
                        <div class="ticket-payment">
                            <label
                                style="display:block; margin-bottom: 5px; font-size: 0.7rem; text-transform: uppercase; color: #6c757d; letter-spacing: 0.5px;">M√©todo
                                de Pago</label>
                            <div class="pay-method-grid">
                                <button type="button" class="pay-btn active" data-value="Efectivo"
                                    onclick="app.ui.setPosPaymentMethod('Efectivo')">
                                    <i class="fas fa-money-bill-wave"></i> Contra Entrega
                                </button>
                                <button type="button" class="pay-btn" data-value="Terminal"
                                    onclick="app.ui.setPosPaymentMethod('Terminal')">
                                    <i class="fas fa-credit-card"></i> Card
                                </button>
                                <button type="button" class="pay-btn" data-value="Transferencia"
                                    onclick="app.ui.setPosPaymentMethod('Transferencia')">
                                    <i class="fas fa-university"></i> Transf.
                                </button>
                            </div>
                            <!-- Hidden input to maintain compatibility with existing logic -->
                            <input type="hidden" id="pos-pay-method" value="Efectivo">
                            <div id="pos-folio-container" class="hidden" style="margin-top: 10px;">
                                <label>Folio / Referencia</label>
                                <input type="text" id="pos-pay-folio" placeholder="Ej. 1234">
                            </div>
                            <div id="pos-bank-info-display" class="hidden"
                                style="margin-top: 10px; background: #e3f2fd; padding:10px; border-radius:8px; font-size: 0.8rem; border: 1px solid #bbdefb;">
                                <b>Datos de Transferencia:</b>
                                <div id="pos-bank-details-text"></div>
                            </div>
                            <div class="ticket-actions">
                                <button class="btn-ticket-confirm" id="btn-pos-checkout"
                                    onclick="app.pos.checkoutStaff()">
                                    <i class="fas fa-check-circle"></i> CONFIRMAR VENTA
                                </button>
                                <button class="btn-ticket-secondary"
                                    style="border-color: #ff8a80; color: #d32f2f; background: #ffebee; font-weight: bold;"
                                    onclick="app.pos.clearCart()">
                                    <i class="fas fa-ban"></i> CANCELAR PEDIDO
                                </button>
                            </div>
                            <div class="ticket-last-sale">
                                √öLTIMA VENTA:
                                <span id="ticket-last-val">$0.00</span>
                            </div>
                            <div style="text-align: center; font-size: 0.6rem; color: #ccc; margin-top: 15px;">
                                SUITORG POS ENGINE v2.8.7
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <button id="mobile-ticket-trigger" class="mobile-ticket-trigger" onclick="app.ui.toggleMobileTicket(true)">
                <div class="trigger-icon-container">
                    <i class="fas fa-shopping-cart"></i>
                    <span id="mobile-cart-badge" class="badge">0</span>
                </div>
                <span style="font-weight: 700; font-size: 0.9rem; margin-left: 10px;">REVISAR PEDIDO</span>
                <span id="mobile-cart-total" class="trigger-total">$0.00</span>
            </button>
        </section>
        <section id="view-reports" class="view-section hidden">
            <div class="report-mode-selector" style="display:flex; gap:10px; margin-bottom: 20px;">
                <button class="btn-tab active" id="btn-mode-fixed" onclick="app.ui.setReportMode('fixed')">
                    <i class="fas fa-file-alt"></i> Reportes Fijos
                </button>
                <button class="btn-tab" id="btn-mode-dashboard" onclick="app.ui.setReportMode('dashboard')">
                    <i class="fas fa-chart-pie"></i> Dashboard de Negocio
                </button>
            </div>
            <div id="report-view-fixed">
                <div class="section-header">
                    <h2><i class="fas fa-list-ul"></i> Reportes Operativos</h2>
                </div>
                <div class="card glass" style="margin-bottom: 20px; padding: 20px;">
                    <div
                        style="display: flex; gap: 20px; align-items: center; flex-wrap: wrap; justify-content: space-between;">
                        <div style="display: flex; gap: 15px; align-items: center;">
                            <div class="form-group" style="margin-bottom: 0;">
                                <label style="margin-bottom: 2px; font-size: 0.75rem;"><i
                                        class="fas fa-calendar-alt"></i>
                                    Alcance</label>
                                <select id="report-type" onchange="app.ui.handleReportTypeChange()"
                                    style="padding: 8px; border-radius: 8px;">
                                    <option value="DIARIO">D√≠a Actual</option>
                                    <option value="QUINCENA">Quincena Actual</option>
                                    <option value="MENSUAL">Mes Actual</option>
                                </select>
                            </div>
                            <div class="form-group" style="margin-bottom: 0;" id="report-date-container">
                                <label style="margin-bottom: 2px; font-size: 0.75rem;"><i
                                        class="fas fa-calendar-day"></i>
                                    Fecha</label>
                                <input type="date" id="report-date" onchange="app.ui.renderReport()"
                                    style="padding: 7px; border-radius: 8px;">
                            </div>
                        </div>
                        <div class="export-actions">
                            <button class="btn-small"
                                style="background:#e74c3c; color:white; border:none; padding: 10px 15px;"
                                onclick="app.ui.exportReport('PDF')">
                                <i class="fas fa-file-pdf"></i> Exportar PDF
                            </button>
                            <button class="btn-small"
                                style="background:#27ae60; color:white; border:none; padding: 10px 15px;"
                                onclick="app.ui.exportReport('VTS')">
                                <i class="fas fa-file-csv"></i> Exportar VTS
                            </button>
                        </div>
                    </div>
                </div>
                <!-- Horizontal Report Selector Tabs -->
                <div class="report-tabs" id="report-tab-selector">
                    <button class="report-tab-btn active" data-report="general"
                        onclick="app.ui.selectReportType('general', this)">
                        <i class="fas fa-list-ul"></i> Resumen General
                    </button>
                    <button class="report-tab-btn" data-report="payments"
                        onclick="app.ui.selectReportType('payments', this)">
                        <i class="fas fa-money-check-alt"></i> Mezcla de Pagos
                    </button>
                    <button class="report-tab-btn" data-report="profit"
                        onclick="app.ui.selectReportType('profit', this)">
                        <i class="fas fa-chart-line"></i> Top Rentabilidad
                    </button>
                    <button class="report-tab-btn" data-report="products"
                        onclick="app.ui.selectReportType('products', this)">
                        <i class="fas fa-box-open"></i> Volumen de Ventas
                    </button>
                </div>
                <div class="card glass" style="border: none; background: rgba(255,255,255,0.02);">
                    <div id="report-content">
                        <!-- Din√°mico -->
                    </div>
                </div>
            </div>
            <!-- Dashboard de Negocio View (New v3.7.0) -->
            <div id="report-view-dashboard" class="hidden">
                <div class="card glass" style="margin-bottom: 20px; padding: 25px;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <h2 style="margin: 0; color: var(--primary-color);"><i class="fas fa-briefcase"></i>
                                Dashboard Ejecutivo</h2>
                            <p style="margin: 5px 0 0; opacity: 0.7; font-size: 0.9rem;">Visualizaci√≥n de KPIs y
                                tendencias en tiempo real.</p>
                        </div>
                        <div class="actions">
                            <button class="btn-refresh" onclick="app.ui.renderBusinessDashboard()"><i
                                    class="fas fa-sync-alt"></i></button>
                        </div>
                    </div>
                </div>
                <div class="dashboard-grid"
                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 20px;">
                    <div class="chart-container card glass" style="padding: 20px;">
                        <h3 style="font-size: 0.9rem; text-transform: uppercase; margin-bottom: 15px; color: #888;"><i
                                class="fas fa-chart-bar"></i> Ventas Diarias (7d)</h3>
                        <div style="height: 250px;">
                            <canvas id="chart-sales-daily"></canvas>
                        </div>
                    </div>
                    <div class="chart-container card glass" style="padding: 20px;">
                        <h3 style="font-size: 0.9rem; text-transform: uppercase; margin-bottom: 15px; color: #888;"><i
                                class="fas fa-chart-pie"></i> Mezcla de Pagos</h3>
                        <div style="height: 250px; display: flex; justify-content: center;">
                            <canvas id="chart-payment-methods"></canvas>
                        </div>
                    </div>
                </div>
                <div class="card glass" style="margin-top: 20px; padding: 20px;">
                    <h3 style="font-size: 0.9rem; text-transform: uppercase; margin-bottom: 15px; color: #888;"><i
                            class="fas fa-chart-line"></i> Tendencia de Ingresos Mensuales</h3>
                    <div style="height: 300px;">
                        <canvas id="chart-monthly-trend"></canvas>
                    </div>
                </div>
            </div>
        </section>
        <!-- SECTION: CATALOG (Staff Only) -->
        <section id="view-catalog" class="view-section hidden">
            <div class="section-header">
                <h2>Cat√°logo de Productos</h2>
                <button class="btn-primary" id="btn-show-product-modal" onclick="app.ui.openProductModal()">
                    <i class="fas fa-box"></i> Agregar Producto
                </button>
            </div>
            <div id="catalog-perm-notice" class="hidden"></div>
            <!-- TABLE CONTROLS -->
            <div class="table-controls">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="catalog-search" placeholder="Buscar productos..."
                        oninput="app.ui.renderCatalog()">
                </div>
                <div style="display: flex; gap: 10px; align-items: center;">
                    <div class="export-actions">
                        <button class="btn-small btn-export-pdf" onclick="app.ui.exportTable('Catalogo', 'PDF')"
                            title="Exportar a PDF">
                            <i class="fas fa-file-pdf"></i>
                        </button>
                        <button class="btn-small btn-export-vts" onclick="app.ui.exportTable('Catalogo', 'VTS')"
                            title="Exportar a VTS">
                            <i class="fas fa-file-csv"></i>
                        </button>
                    </div>
                    <button class="btn-refresh" title="Refrescar Datos" onclick="app.ui.refreshData('catalog')">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                </div>
            </div>
            <div id="catalog-grid" class="catalog-grid">
                <!-- JS Renders Cards Here -->
            </div>
        </section>
        <!-- SECTION: AI AGENTS (God Mode Only) -->
        <section id="view-agents" class="view-section hidden">
            <div class="section-header">
                <h2><i class="fas fa-brain"></i> Sistema de Agentes AI</h2>
                <button class="btn-small" onclick="window.location.hash='#dashboard'">Volver</button>
            </div>
            <div class="features-grid" id="agents-grid">
                <!-- Agents rendered here -->
                <div class="feature-card" onclick="app.agents.run('Escritor')"
                    style="cursor:pointer; border:1px solid gold;">
                    <i class="fas fa-pen-fancy"></i>
                    <h3>Agente Escritor</h3>
                    <p>Redacta pol√≠ticas, contratos y documentos formales.</p>
                </div>
                <div class="feature-card" onclick="app.agents.run('Analista')"
                    style="cursor:pointer; border:1px solid gold;">
                    <i class="fas fa-chart-pie"></i>
                    <h3>Agente Analista</h3>
                    <p>Analiza tendencias y datos de la empresa.</p>
                </div>
                <div class="feature-card" onclick="app.agents.run('Marketing')"
                    style="cursor:pointer; border:1px solid gold;">
                    <i class="fas fa-ad"></i>
                    <h3>Agente Marketing</h3>
                    <p>Genera posts y campa√±as de redes sociales.</p>
                </div>
                <div class="feature-card" onclick="app.agents.run('Negocio')"
                    style="cursor:pointer; border:1px solid gold;">
                    <i class="fas fa-briefcase"></i>
                    <h3>Agente de Negocio</h3>
                    <p>Genera propuestas estrat√©gicas.</p>
                </div>
            </div>
            <!-- MODERN AI CHAT MODAL (Moved out and made modal) -->
        </section>
        <!-- SECTION: POS / STAFF ORDERS (PFM) -->
        <section id="view-pos" class="view-section hidden">
            <div class="pos-dashboard">
                <div class="pos-header">
                    <h2><i class="fas fa-desktop"></i> Monitor de Pedidos PFM</h2>
                    <div class="pos-status-filters">
                        <button id="filter-btn-recibido" class="pos-filter-btn active"
                            onclick="app.ui.filterPOS('PEDIDO-RECIBIDO')" data-status="PEDIDO-RECIBIDO">Nuevos</button>
                        <button id="filter-btn-cocina" class="pos-filter-btn" onclick="app.ui.filterPOS('EN-COCINA')"
                            data-status="EN-COCINA">En Cocina</button>
                        <button id="filter-btn-listo" class="pos-filter-btn" onclick="app.ui.filterPOS('LISTO-ENTREGA')"
                            data-status="LISTO-ENTREGA">Listos</button>
                        <button id="filter-btn-entregado" class="pos-filter-btn" onclick="app.ui.filterPOS('ENTREGADO')"
                            data-status="ENTREGADO">Entregados</button>
                    </div>
                </div>
                <div id="pos-orders-grid" class="pos-grid">
                    <!-- Orders injected via JS -->
                </div>
            </div>
        </section>
        <!-- SECTION: BUSINESS QUOTAS (SaaS Management) -->
        <section id="view-quotas" class="view-section hidden">
            <div class="section-header">
                <h2><i class="fas fa-money-check-alt"></i> Historial de Cuotas y Pagos</h2>
                <div class="header-actions">
                    <button class="btn-refresh" title="Refrescar Datos" onclick="app.ui.refreshData('quotas')">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                </div>
            </div>
            <div class="card glass" style="padding: 20px;">
                <div class="table-container">
                    <table class="modern-table">
                        <thead>
                            <tr>
                                <th>Concepto</th>
                                <th>Monto</th>
                                <th>Vencimiento</th>
                                <th>Estado</th>
                                <th style="text-align: right;">Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="quotas-table-body">
                            <!-- Inyectado v√≠a JS -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>
        <!-- SECTION: CONTACT / FORM -->
        <section id="view-contact" class="view-section hidden">
            <div class="form-container">
                <h2>Cont√°ctanos</h2>
                <p>D√©janos tus datos y un asesor se comunicar√° contigo.</p>
                <form id="public-lead-form">
                    <div class="form-group">
                        <label>Nombre Completo</label>
                        <input type="text" id="lead-name" required>
                    </div>
                    <div class="form-group">
                        <label>Tel√©fono / WhatsApp</label>
                        <input type="tel" id="lead-phone" required>
                    </div>
                    <div class="form-group">
                        <label>Correo Electr√≥nico</label>
                        <input type="email" id="lead-email">
                    </div>
                    <div class="form-group">
                        <label>Direcci√≥n</label>
                        <input type="text" id="lead-address" placeholder="Calle, N√∫mero, Colonia..." autocomplete="off">
                    </div>
                    <button type="submit" class="btn-primary w-100">Enviar Informaci√≥n</button>
                </form>
            </div>
        </section>
        <!-- SECTION: ORBIT / HUB BUBBLES (Premium Experience) -->
        <section id="view-orbit" class="view-section hidden"
            style="background:#080808; min-height:100vh; position:relative; overflow:hidden;">
            <!-- Background Decoration -->
            <div
                style="position:absolute; top:0; left:0; width:100%; height:100%; background: radial-gradient(circle at 50% 50%, #111 0%, #000 100%); z-index:0;">
            </div>



            <!-- Bubble Canvas -->
            <div id="orbit-bubbles" style="position:absolute; top:0; left:0; width:100%; height:100%; z-index:1;">
                <!-- Bubbles injected via JS -->
            </div>

            <!-- Exit Button -->
            <div style="position:absolute; bottom:30px; left:50%; transform:translateX(-50%); z-index:3;">
                <button onclick="window.location.hash='#home'"
                    style="padding:10px 25px; background:rgba(255,255,255,0.05); border:1px solid #333; color:#666; cursor:pointer; border-radius:50px; font-size:0.7rem; transition:0.3s;"
                    onmouseover="this.style.background='rgba(255,255,255,0.1)'; this.style.color='#fff';"
                    onmouseout="this.style.background='rgba(255,255,255,0.05)'; this.style.color='#666';">
                    <i class="fas fa-times"></i> CLOSE ORBIT
                </button>
            </div>
        </section>
        <!-- MODAL: CHECKOUT (PFM) -->
        <div id="checkout-modal" class="modal-overlay hidden">
            <div class="modal-content minimalist-form" style="max-width: 500px;">
                <div class="modal-header">
                    <h2><i class="fas fa-shopping-cart"></i> Checkout Express</h2>
                    <button class="close-btn" onclick="app.pos.closeCheckout()">&times;</button>
                </div>
                <div class="step-indicator">
                    <span id="step-dot-1" class="step-dot active">1. Ticket</span>
                    <span id="step-dot-2" class="step-dot">2. Pago</span>
                    <span id="step-dot-3" class="step-dot">3. WhatsApp</span>
                </div>
                <div class="modal-body">
                    <!-- STEP 1: RESUMEN / TICKET -->
                    <div id="checkout-step-1" class="checkout-step">
                        <div style="margin-bottom: 20px;">
                            <label
                                style="font-size: 0.8rem; font-weight: bold; color: #666; text-transform: uppercase;">¬øC√≥mo
                                quieres recibir tu pedido?</label>
                            <div class="delivery-selector" style="display: flex; gap: 10px; margin-top: 8px;">
                                <button class="delivery-opt active" data-method="PICKUP"
                                    onclick="app.pos.setDeliveryMethod('PICKUP')"
                                    style="flex: 1; padding: 12px; border: 2px solid #ddd; border-radius: 12px; background: white; cursor: pointer; transition: all 0.3s;">
                                    <i class="fas fa-store"></i><br>Recoger en Local
                                </button>
                                <button class="delivery-opt" data-method="DOMICILIO"
                                    onclick="app.pos.setDeliveryMethod('DOMICILIO')"
                                    style="flex: 1; padding: 12px; border: 2px solid #ddd; border-radius: 12px; background: white; cursor: pointer; transition: all 0.3s;">
                                    <i class="fas fa-truck-loading"></i><br>A Domicilio
                                </button>
                            </div>
                        </div>
                        <div class="ticket-container-express">
                            <div class="ticket-header">
                                <img src="" id="express-ticket-logo"
                                    style="max-width: 80px; display: block; margin: 0 auto 5px;" class="hidden">
                                <h3>ORDEN DE COMPRA</h3>
                                <p id="express-ticket-date"
                                    style="font-size: 0.8rem; color: #666; font-family: sans-serif;"></p>
                            </div>
                            <div id="express-ticket-items" class="ticket-body" style="min-height: 80px;">
                                <!-- Itemsjected via JS -->
                            </div>
                            <div class="ticket-footer" style="padding: 10px 0 0 0;">
                                <div class="ticket-row"
                                    style="margin-top:0; color:#888; border-top: 1px dashed #eee; padding-top: 5px;">
                                    <span>SUBTOTAL:</span>
                                    <span id="express-ticket-subtotal">$0.00</span>
                                </div>
                                <div id="express-delivery-row" class="ticket-row hidden"
                                    style="margin-top:0; color:#ee5253;">
                                    <span>CARGO ENV√çO:</span>
                                    <span id="express-delivery-fee">$0.00</span>
                                </div>
                                <div class="ticket-row total"
                                    style="margin-top:5px; border-top: 2px solid #333; padding-top: 5px;">
                                    <span>TOTAL:</span>
                                    <span id="express-ticket-total">$0.00</span>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer" style="padding: 0; display: flex; flex-direction: column; gap: 8px;">
                            <button class="btn-primary w-100"
                                style="height: 45px; font-size: 1.1rem; border-radius: 50px;"
                                onclick="app.pos.nextStep(2)">Continuar al Pago <i class="fas fa-arrow-right"
                                    style="margin-left: 10px;"></i></button>
                            <button class="btn-secondary w-100"
                                style="height: 35px; border-radius: 50px; font-size: 0.8rem; background: #fff; color: #999; border: 1px solid #eee;"
                                onclick="app.pos.clearCart(); app.pos.closeCheckout();">
                                <i class="fas fa-times-circle"></i> Cancelar Pedido
                            </button>
                        </div>
                    </div>
                    <!-- STEP 2: DATOS Y PAGO -->
                    <div id="checkout-step-2" class="checkout-step hidden">
                        <div class="form-group">
                            <label>Nombre *</label>
                            <input type="text" id="cust-name" required placeholder="Ej. Juan P√©rez">
                        </div>
                        <div class="form-group">
                            <label>Tel√©fono *</label>
                            <input type="tel" id="cust-phone" required placeholder="Ej. 521234567890">
                        </div>
                        <div id="address-block" class="form-group hidden">
                            <label>Direcci√≥n *</label>
                            <input type="text" id="cust-address" required placeholder="Calle, N√∫mero, Colonia...">
                        </div>
                        <div class="form-group">
                            <label>Notas Especiales (Opcional)</label>
                            <textarea id="cust-notes" placeholder="Ej. Sin cebolla, dejar en recepci√≥n, puerta roja..."
                                style="width: 100%; border: 1px solid #ddd; border-radius: 8px; padding: 10px; font-family: inherit; height: 60px; resize: none;"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Forma de Pago</label>
                            <div class="pay-method-grid" style="margin-top: 8px;">
                                <button type="button" class="pay-btn active" data-value="Efectivo"
                                    onclick="app.ui.setPublicPaymentMethod('Efectivo')">
                                    <i class="fas fa-money-bill-wave"></i> Contra Entrega
                                </button>
                                <button type="button" class="pay-btn" data-value="Transferencia"
                                    onclick="app.ui.setPublicPaymentMethod('Transferencia')">
                                    <i class="fas fa-university"></i> Transf.
                                </button>
                            </div>
                            <input type="hidden" id="pay-method" value="Efectivo">
                        </div>
                        <div id="bank-info-display" class="hidden"
                            style="background: #e3f2fd; padding: 15px; border-radius: 10px; margin-bottom: 20px; border: 1px solid #bbdefb; animation: fadeIn 0.3s;">
                            <p
                                style="font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; color: #1565c0; margin: 0 0 8px 0; font-weight: bold;">
                                <i class="fas fa-university"></i> Datos para Transferencia:
                            </p>
                            <p id="bank-details-text"
                                style="font-size: 1rem; font-weight: 700; color: #0d47a1; margin: 0; line-height: 1.5;">
                            </p>
                        </div>
                        <div id="confirm-block" class="form-group hidden">
                            <label>N¬∞ Confirmaci√≥n *</label>
                            <input type="text" id="pay-confirm" placeholder="Ej. 1234">
                        </div>
                        <div class="modal-footer"
                            style="padding: 10px 0 0 0; display: flex; flex-direction: column; gap: 8px;">
                            <div style="display: flex; gap: 10px; width: 100%;">
                                <button class="btn-secondary" style="flex: 1; height: 45px; border-radius: 50px;"
                                    onclick="app.pos.nextStep(1)"><i class="fas fa-arrow-left"></i> Volver</button>
                                <button class="btn-primary" id="btn-confirm-order"
                                    style="flex: 2; height: 45px; border-radius: 50px;"
                                    onclick="app.pos.checkout()">Finalizar Pedido <i class="fas fa-check"></i></button>
                            </div>
                            <button class="btn-secondary w-100"
                                style="height: 35px; border-radius: 50px; font-size: 0.8rem; background: #fff; color: #999; border: 1px solid #eee;"
                                onclick="app.pos.clearCart(); app.pos.closeCheckout();">
                                <i class="fas fa-times-circle"></i> Cancelar Pedido
                            </button>
                        </div>
                    </div>
                    <!-- STEP 3: EXITO Y WHATSAPP -->
                    <div id="checkout-step-3" class="checkout-step hidden" style="text-align: center; padding: 20px 0;">
                        <div style="font-size: 4rem; color: #2ecc71; margin-bottom: 20px;">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <h2 style="margin-bottom: 5px;">¬°Pedido Recibido!</h2>
                        <div id="ots-folio-display" style="margin-bottom: 20px;">
                            <span
                                style="font-size: 0.8rem; color: #888; text-transform: uppercase; letter-spacing: 1px;">Folio
                                OTS:</span>
                            <span id="ots-folio-value"
                                style="display: block; font-size: 1.2rem; font-weight: bold; color: var(--primary-color);">#ORD-XXXXXXXX</span>
                        </div>
                        <div id="otp-success-banner" class="hidden"
                            style="background: #fff9c4; border: 2px dashed #fbc02d; padding: 15px; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.05);">
                            <p
                                style="font-size: 0.75rem; color: #f57f17; font-weight: bold; text-transform: uppercase; margin-bottom: 5px;">
                                üîë Tu c√≥digo de entrega es:</p>
                            <span id="otp-success-value"
                                style="font-size: 2.2rem; font-weight: 900; color: #000; letter-spacing: 5px;">----</span>
                            <p style="font-size: 0.7rem; color: #666; margin-top: 8px;">D√≠ctalo al repartidor para
                                recibir tu pedido.</p>
                        </div>
                        <p style="color: #666; margin-bottom: 30px; line-height: 1.6; font-weight: bold;">Tu orden ha
                            sido registrada
                            correctamente.<br>Para agilizar tu pedido, env√≠anos el resumen por WhatsApp.</p>
                        <button id="btn-wa-send" class="btn-primary w-100"
                            style="background: #25D366 !important; border-color: #25D366 !important; height: 65px; font-size: 1.2rem; border-radius: 12px; box-shadow: 0 4px 15px rgba(37, 211, 102, 0.3);"
                            onclick="app.pos.sendWhatsApp()">
                            <i class="fab fa-whatsapp" style="margin-right: 10px; font-size: 1.5rem;"></i> Enviar por
                            WhatsApp
                        </button>
                        <button class="btn-link"
                            style="margin-top: 25px; display: block; width: 100%; color: #888; text-decoration: none; font-size: 0.9rem;"
                            onclick="app.pos.closeCheckout()">Cerrar y volver al cat√°logo</button>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <!-- FOOTER -->
    <!-- FOOTER: DYNAMIC & MODULAR -->
    <footer id="main-footer">
        <!-- Default Footer content or Business Specific Footer -->
        <div id="footer-dynamic-content" class="footer-minimal">
            <div class="footer-brand" id="footer-copy">
                &copy; 2026 Grupo EVASOL. Todos los derechos reservados.
            </div>
            <div class="footer-links" id="footer-links-container">
                <a href="#contact" class="btn-link">Contacto</a>
                <div class="social-mini">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
        </div>
    </footer>
    <!-- CREATE LEAD MODAL -->
    <div id="lead-modal-overlay" class="modal-overlay hidden">
        <div class="modal">
            <span class="close-modal" id="btn-close-lead">&times;</span>
            <div class="modal-header">
                <h3><i class="fas fa-user-plus"></i> Nuevo Lead</h3>
            </div>
            <div class="modal-body">
                <form id="form-new-lead">
                    <div class="form-group">
                        <label>Nombre Completo</label>
                        <input type="text" id="new-lead-name" required autocomplete="off">
                    </div>
                    <div class="form-group">
                        <label>Tel√©fono</label>
                        <input type="tel" id="new-lead-phone" required autocomplete="off">
                    </div>
                    <div class="form-group">
                        <label>Email (Opcional)</label>
                        <input type="email" id="new-lead-email" autocomplete="off">
                    </div>
                    <div class="form-group">
                        <label>Direcci√≥n</label>
                        <input type="text" id="new-lead-address" placeholder="Calle, N√∫mero, Colonia..."
                            autocomplete="off">
                    </div>
                    <div class="form-group">
                        <label>Origen</label>
                        <select id="new-lead-source" style="width: 100%; padding: 10px;">
                            <option value="Local">Local / Visita</option>
                            <option value="Telefono">Llamada</option>
                            <option value="Referido">Referido</option>
                            <option value="Web">Web</option>
                        </select>
                    </div>
                    <button type="submit" class="btn-primary w-100" style="margin-bottom: 10px;">Guardar
                        Lead</button>
                    <button type="button" class="btn-secondary w-100"
                        onclick="document.getElementById('lead-modal-overlay').classList.add('hidden')">Cancelar /
                        Volver</button>
                    <div id="lead-msg" class="success-msg hidden"
                        style="color: green; margin-top:10px; text-align:center;">¬°Guardado!</div>
                </form>
            </div>
        </div>
    </div>
    <!-- PRODUCT MODAL -->
    <div id="product-modal-overlay" class="modal-overlay hidden">
        <div class="modal">
            <span class="close-modal" id="btn-close-product">&times;</span>
            <div class="modal-header">
                <h3><i class="fas fa-box-open"></i> Nuevo Producto</h3>
            </div>
            <div class="modal-body">
                <form id="form-new-product">
                    <div class="form-group">
                        <label>Nombre del Producto / Combo</label>
                        <input type="text" id="prod-name" required placeholder="Ej: Combo Familiar" autocomplete="off">
                    </div>
                    <div class="form-group">
                        <label>Descripci√≥n</label>
                        <textarea id="prod-desc" placeholder="Detalles del producto..."
                            style="width:100%; height:80px; padding:10px; border-radius:8px; border:1px solid #ddd;"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Categor√≠a</label>
                        <select id="prod-cat" style="width: 100%; padding: 10px;">
                            <option value="Combos">Combos / Paquetes</option>
                            <option value="Piezas">Piezas Sueltas</option>
                            <option value="Complementos">Complementos / Guarniciones</option>
                            <option value="Bebidas">Bebidas</option>
                            <option value="Otros">Otros</option>
                        </select>
                    </div>
                    <div class="form-row" style="display:flex; gap:10px;">
                        <div class="form-group" style="flex:1">
                            <label>Precio Regular ($)</label>
                            <input type="number" id="prod-price" required placeholder="0.00" autocomplete="off">
                        </div>
                        <div class="form-group" style="flex:1">
                            <label>Precio Oferta ($)</label>
                            <input type="number" id="prod-offer" placeholder="0.00" autocomplete="off">
                        </div>
                    </div>
                    <div class="form-row" style="display:flex; gap:10px;">
                        <div class="form-group" style="flex:1">
                            <label>Stock Inicial</label>
                            <input type="number" id="prod-stock" value="100" required autocomplete="off">
                        </div>
                        <div class="form-group" style="flex:1">
                            <label>Unidad</label>
                            <input type="text" id="prod-unit" value="pza" placeholder="pza, pkt, orden..."
                                autocomplete="off">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>URL Imagen (Drive/Web)</label>
                        <input type="text" id="prod-img" placeholder="https://..." autocomplete="off">
                    </div>
                    <button type="submit" class="btn-primary w-100"
                        style="margin-bottom: 10px; background: #27ae60 !important; color:white;">Guardar en
                        Cat√°logo</button>
                    <button type="button" class="btn-secondary w-100"
                        onclick="document.getElementById('product-modal-overlay').classList.add('hidden')">Cancelar /
                        Volver</button>
                    <div id="prod-msg" class="success-msg hidden"
                        style="color: green; margin-top:10px; text-align:center;">¬°Agregado con √©xito!</div>
                </form>
            </div>
        </div>
    </div>
    </div>
    <!-- PROJECT MODAL -->
    <div id="project-modal-overlay" class="modal-overlay hidden">
        <div class="modal">
            <span class="close-modal" id="btn-close-project">&times;</span>
            <div class="modal-header">
                <h3><i class="fas fa-hammer"></i> Nuevo Proyecto</h3>
            </div>
            <div class="modal-body">
                <form id="form-new-project">
                    <div class="form-group">
                        <label>Nombre del Proyecto</label>
                        <input type="text" id="proj-name" required autocomplete="off"
                            placeholder="Ej: Residencia familia L√≥pez">
                    </div>
                    <div class="form-group">
                        <label>Cliente Asignado</label>
                        <select id="proj-client" style="width: 100%; padding: 10px;" required>
                            <option value="">-- Seleccionar --</option>
                            <!-- Populated via JS -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Estado Inicial</label>
                        <select id="proj-status" style="width: 100%; padding: 10px;">
                            <option value="Planificacion">Planificaci√≥n</option>
                            <option value="Instalacion">En Instalaci√≥n</option>
                            <option value="Terminado">Terminado</option>
                        </select>
                    </div>
                    <div class="form-row" style="display:flex; gap:10px;">
                        <div class="form-group" style="flex:1">
                            <label>Inicio</label>
                            <input type="date" id="proj-start" required>
                        </div>
                        <div class="form-group" style="flex:1">
                            <label>Fin Aprox</label>
                            <input type="date" id="proj-end" required>
                        </div>
                    </div>
                    <button type="submit" class="btn-primary w-100" style="margin-bottom: 10px;">Crear
                        Proyecto</button>
                    <button type="button" class="btn-secondary w-100"
                        onclick="document.getElementById('project-modal-overlay').classList.add('hidden')">Cancelar
                        /
                        Volver</button>
                    <div id="proj-msg" class="success-msg hidden"
                        style="color: green; margin-top:10px; text-align:center;">¬°Proyecto Creado!</div>
                </form>
            </div>
        </div>
    </div>
    <!-- PROJECT DETAILS MODAL -->
    <div id="project-details-modal" class="modal-overlay hidden">
        <div class="modal">
            <span class="close-modal"
                onclick="document.getElementById('project-details-modal').classList.add('hidden')">&times;</span>
            <div class="modal-header">
                <h3><i class="fas fa-info-circle"></i> Detalles del Proyecto</h3>
            </div>
            <div class="modal-body" id="project-details-content">
                <!-- Content injected via JS -->
            </div>
            <div class="modal-footer" style="padding: 15px; border-top: 1px solid #eee; text-align: right;">
                <button class="btn-primary"
                    onclick="document.getElementById('project-details-modal').classList.add('hidden')">Cerrar</button>
            </div>
        </div>
    </div>
    <!-- STOCK ADJUST MODAL -->
    <div id="stock-modal-overlay" class="modal-overlay hidden">
        <div class="modal" style="max-width: 400px;">
            <div class="modal-header">
                <h3><i class="fas fa-edit"></i> Ajustar Stock</h3>
                <span class="close-modal"
                    onclick="document.getElementById('stock-modal-overlay').classList.add('hidden')">&times;</span>
            </div>
            <div class="modal-body">
                <div id="stock-prod-info" style="margin-bottom:15px; font-weight:bold;">Producto: ...</div>
                <div class="form-group">
                    <label>Nuevo Stock</label>
                    <input type="number" id="input-new-stock" placeholder="0">
                </div>
                <div id="stock-msg" class="success-msg hidden">Stock actualizado.</div>
            </div>
            <div class="modal-footer">
                <button class="btn-primary w-100" id="btn-save-stock">Guardar Cambios</button>
            </div>
        </div>
    </div>
    <!-- DOC TEXT MODAL (Knowledge Base) -->
    <div id="doc-text-modal" class="modal-overlay hidden">
        <div class="modal" style="max-width: 800px; width: 90%;">
            <span class="close-modal"
                onclick="document.getElementById('doc-text-modal').classList.add('hidden')">&times;</span>
            <div class="modal-header">
                <h3><i class="fas fa-file-alt"></i> Contenido Extra√≠do</h3>
            </div>
            <div class="modal-body">
                <p class="text-small" style="margin-bottom:10px; color:#666;">Usa el bot√≥n de abajo para copiar el
                    texto
                    y pegarlo en el chat de Antigravity (IA).</p>
                <textarea id="doc-text-content" readonly
                    style="width:100%; height:350px; padding:10px; border-radius:8px; border:1px solid #ddd; font-family:monospace; font-size:0.85rem; resize:vertical; background:#f4f7f6; line-height:1.4;"></textarea>
                <button class="btn-primary w-100" style="margin-top:15px; font-weight:bold;"
                    onclick="app.ui.copyDocText()"><i class="fas fa-copy"></i> Copiar Contenido</button>
            </div>
        </div>
    </div>
    <!-- LOGIN MODAL -->
    <div id="login-modal-overlay" class="modal-overlay hidden">
        <div class="modal">
            <span class="close-modal" id="btn-close-login">&times;</span>
            <div class="modal-header">
                <h3>Acceso Staff</h3>
            </div>
            <div class="modal-body">
                <input type="text" id="login-user" placeholder="Usuario / Email" autocomplete="off">
                <input type="password" id="login-pass" placeholder="Contrase√±a" autocomplete="off">
                <div id="login-error" class="error-msg hidden">Credenciales inv√°lidas o sin cr√©ditos.</div>
                <button id="btn-login-submit" class="btn-primary w-100">Ingresar</button>
                <button class="btn-secondary w-100"
                    onclick="window.location.hash='#home'; document.getElementById('login-modal-overlay').classList.add('hidden');">Volver
                    al Inicio</button>
            </div>
        </div>
    </div>
    <!-- POLICIES MODAL -->
    <div id="policies-modal-overlay" class="modal-overlay hidden"
        onclick="if(event.target === this) { app.ui.closeInfoModal('policies-modal-overlay'); }">
        <div class="modal" style="max-width: 800px; width: 90%;">
            <div class="modal-header">
                <h3><i class="fas fa-file-contract"></i> Pol√≠ticas</h3>
                <span class="close-modal" onclick="app.ui.closeInfoModal('policies-modal-overlay')">&times;</span>
            </div>
            <div class="modal-body">
                <div id="policies-content">
                    <!-- Content injected via JS -->
                </div>
            </div>
            <div class="modal-footer" style="text-align: right;">
                <button class="btn-primary" onclick="app.ui.closeInfoModal('policies-modal-overlay')">Entendido</button>
            </div>
        </div>
    </div>
    <!-- ABOUT US MODAL -->
    <div id="about-modal-overlay" class="modal-overlay hidden"
        onclick="if(event.target === this) { app.ui.closeInfoModal('about-modal-overlay'); }">
        <div class="modal" style="max-width: 600px; width: 90%;">
            <div class="modal-header">
                <h3><i class="fas fa-building"></i> Nosotros</h3>
                <span class="close-modal" onclick="app.ui.closeInfoModal('about-modal-overlay')">&times;</span>
            </div>
            <div class="modal-body">
                <div id="about-content" class="about-info-grid">
                    <!-- Content injected via JS -->
                </div>
            </div>
            <div class="modal-footer" style="text-align: right;">
                <button class="btn-primary" onclick="app.ui.closeInfoModal('about-modal-overlay')">Cerrar</button>
            </div>
        </div>
    </div>
    <!-- REVIEWS MODAL -->
    <div id="reviews-modal-overlay" class="modal-overlay hidden"
        onclick="if(event.target === this) { app.ui.closeInfoModal('reviews-modal-overlay'); }">
        <div class="modal" style="max-width: 600px; width: 90%;">
            <div class="modal-header">
                <h3><i class="fas fa-star"></i> Opiniones de Clientes</h3>
                <span class="close-modal" onclick="app.ui.closeInfoModal('reviews-modal-overlay')">&times;</span>
            </div>
            <div class="modal-body">
                <div id="reviews-content" style="max-height: 400px; overflow-y: auto;">
                    <!-- Content injected via JS -->
                </div>
            </div>
            <div class="modal-footer" style="text-align: right;">
                <div id="reviews-timer" style="float:left; font-size:0.75rem; color:#999; margin-top:10px;"></div>
                <button class="btn-primary" onclick="app.ui.closeInfoModal('reviews-modal-overlay')">Volver</button>
            </div>
        </div>
    </div>
    <!-- LOCATION MODAL -->
    <div id="location-modal-overlay" class="modal-overlay hidden"
        onclick="if(event.target === this) { app.ui.closeInfoModal('location-modal-overlay'); }">
        <div class="modal" style="max-width: 800px; width: 90%;">
            <div class="modal-header">
                <h3><i class="fas fa-map-marker-alt"></i> Nuestra Ubicaci√≥n</h3>
                <span class="close-modal" onclick="app.ui.closeInfoModal('location-modal-overlay')">&times;</span>
            </div>
            <div class="modal-body">
                <div id="location-content">
                    <!-- Content injected via JS -->
                </div>
            </div>
            <div class="modal-footer" style="text-align: right;">
                <button class="btn-primary" onclick="app.ui.closeInfoModal('location-modal-overlay')">Cerrar</button>
            </div>
        </div>
    </div>
    <!-- DELIVERY OTP MODAL -->
    <div id="otp-modal" class="modal-overlay hidden" style="z-index: 99999;">
        <div class="modal" style="max-width: 400px; text-align: center; border: 2px solid var(--primary-color);">
            <div class="modal-header">
                <h3><i class="fas fa-key"></i> C√≥digo de Entrega</h3>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: 20px; color: #555;">Solicita el c√≥digo de 4 d√≠gitos al cliente para confirmar
                    la entrega.</p>
                <input type="text" id="otp-entry-input" placeholder="0000" maxlength="4"
                    style="font-size: 2.5rem; text-align: center; letter-spacing: 15px; font-weight: 900; padding: 10px; border: 2px solid #ddd; border-radius: 12px; width: 80%; margin-bottom: 20px;">
                <button class="btn-primary w-100" style="padding: 15px; font-size: 1.1rem;"
                    onclick="app.ui.verifyOtp()">
                    VERIFICAR Y ENTREGAR
                </button>
                <button class="btn-secondary w-100" style="margin-top: 10px; font-size: 0.9rem;"
                    onclick="app.ui.closeOtpModal()">
                    CANCELAR
                </button>
            </div>
        </div>
    </div>
    <script src="js/modules/config.js?v=4.7.0"></script>
    <script src="js/modules/core.js?v=4.7.0"></script>
    <script src="js/modules/auth.js?v=4.7.0"></script>
    <script src="js/modules/public.js?v=4.7.0"></script>
    <script src="js/modules/events.js?v=4.7.0"></script>
    <script src="js/modules/ui.js?v=4.7.0"></script>
    <script src="js/modules/agents.js?v=4.7.0"></script>
    <script src="js/modules/admin.js?v=4.7.0"></script>
    <script src="js/modules/router.js?v=4.7.0"></script>
    <script src="js/modules/pos.js?v=4.7.0"></script>
    <script src="app.js?v=4.7.0"></script>
    <!-- MODAL: KNOWLEDGE UPLOAD (Manual) -->
    <div id="knowledge-modal" class="modal-overlay hidden">
        <div class="modal-content minimalist-form" style="max-width: 500px;">
            <div class="modal-header">
                <h2><i class="fas fa-book-medical"></i> Cargar Conocimiento</h2>
                <button class="close-btn"
                    onclick="document.getElementById('knowledge-modal').classList.add('hidden')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="form-knowledge-manual">
                    <div class="form-group">
                        <label>T√≠tulo / Nombre del Documento</label>
                        <input type="text" id="k-title" required placeholder="Ej: Manual de Limpieza PFM">
                    </div>
                    <div class="form-group">
                        <label>Contenido de Texto (Opcional)</label>
                        <textarea id="k-text" placeholder="Pega aqu√≠ el texto que quieras que la IA aprenda..."
                            style="height: 120px;"></textarea>
                    </div>
                    <div class="form-group">
                        <label>URL de Imagen / Foto (Opcional)</label>
                        <input type="url" id="k-img" placeholder="https://example.com/foto.jpg">
                    </div>
                    <div id="k-msg" class="msg-box hidden"></div>
                    <div class="modal-footer" style="padding: 15px 0 0 0;">
                        <button type="submit" class="btn-primary w-100">Guardar en Base de Datos</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- MODERN AI CHAT MODAL (Global Overlay) -->
    <div id="ai-chat-modal" class="modal-overlay hidden" style="z-index: 10000;">
        <div class="modal"
            style="max-width: 600px; width: 95%; height: 80vh; display: flex; flex-direction: column; padding: 0; overflow: hidden; border: 1px solid var(--primary-color); border-radius: 12px;">
            <div class="modal-header"
                style="padding: 15px; background: var(--primary-color); color: white; display: flex; justify-content: space-between; align-items: center;">
                <h3 style="margin:0;"><i class="fas fa-robot"></i> <span id="agent-display-name">Agente de Apoyo</span>
                </h3>
                <span class="close-modal" onclick="app.agents.closeChat()"
                    style="color: white; opacity: 0.8;">&times;</span>
            </div>
            <!-- Chat History Area -->
            <div id="chat-history"
                style="flex: 1; overflow-y: auto; padding: 20px; background: #f9f9f9; display: flex; flex-direction: column; gap: 15px;">
                <!-- Messages will appear here -->
            </div>
            <!-- Loading Indicator -->
            <div id="ai-loading" class="hidden"
                style="padding: 5px 15px; background: #fff; font-size: 0.8rem; color: #666; border-top: 1px solid #eee;">
                <i class="fas fa-spinner fa-spin"></i> La IA est√° procesando...
            </div>
            <!-- Input Area -->
            <div id="chat-input-area"
                style="padding: 15px; background: white; border-top: 1px solid #eee; display: flex; gap: 10px; align-items: center;">
                <input type="file" id="chat-file-input" style="display: none;"
                    onchange="app.agents.handleFileUpload(this)">
                <button id="btn-attach-chat" class="btn-secondary" title="Adjuntar Archivo"
                    style="height: 45px; width: 45px; min-width: 45px; border-radius: 50%; display: flex; align-items: center; justify-content: center; padding: 0; background-color: #f0f0f0; color: #555; border: 1px solid #ddd;"
                    onclick="document.getElementById('chat-file-input').click()">
                    <i class="fas fa-paperclip"></i>
                </button>
                <textarea id="chat-user-input" placeholder="Escribe tu mensaje aqu√≠..."
                    style="flex: 1; height: 50px; padding: 8px 12px; border-radius: 25px; border: 1px solid #ddd; resize: none; font-family: inherit; font-size: 0.9rem; outline: none;"></textarea>
                <button id="btn-send-chat" class="btn-primary"
                    style="height: 45px; width: 45px; min-width: 45px; border-radius: 50%; display: flex; align-items: center; justify-content: center; padding: 0;"
                    onclick="app.agents.sendMessage()">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>
    <!-- MODAL: LOGS SYSTEM -->
    <div id="logs-modal" class="modal-overlay hidden">
        <div class="modal" style="max-width: 800px; width: 95%; height: 85vh; display: flex; flex-direction: column;">
            <div class="modal-header">
                <h3><i class="fas fa-terminal"></i> Auditor√≠a de Logs del Sistema</h3>
                <span class="close-modal"
                    onclick="document.getElementById('logs-modal').classList.add('hidden')">&times;</span>
            </div>
            <div class="modal-body" style="flex: 1; display: flex; flex-direction: column; overflow: hidden;">
                <div class="table-controls" style="margin-bottom: 15px;">
                    <div class="search-box" style="flex: 1;">
                        <i class="fas fa-filter"></i>
                        <input type="text" id="log-search" placeholder="Filtrar logs por acci√≥n, usuario o ID..."
                            oninput="app.ui.renderSystemLogs()">
                    </div>
                </div>
                <div id="logs-container"
                    style="flex: 1; overflow-y: auto; background: #1e1e1e; color: #d4d4d4; padding: 15px; border-radius: 8px; font-family: 'Consolas', monospace; font-size: 0.8rem; line-height: 1.5;">
                    <!-- Logs injected via JS -->
                    <div style="text-align: center; padding: 40px; opacity: 0.5;">Cargando registros...</div>
                </div>
            </div>
            <div class="modal-footer" style="text-align: right;">
                <button class="btn-secondary" onclick="app.ui.refreshData('Logs')"><i class="fas fa-sync"></i>
                    Recargar</button>
                <button class="btn-primary"
                    onclick="document.getElementById('logs-modal').classList.add('hidden')">Cerrar</button>
            </div>
        </div>
    </div>
    <!-- MODAL: DATABASE REPAIR -->
    <div id="repair-modal" class="modal-overlay hidden">
        <div class="modal" style="max-width: 500px; text-align: center;">
            <div class="modal-header">
                <h3><i class="fas fa-tools"></i> Mantenimiento de Datos</h3>
            </div>
            <div id="repair-status-content" class="modal-body">
                <div id="repair-idle">
                    <i class="fas fa-database fa-4x" style="color: #f1c40f; margin-bottom: 20px;"></i>
                    <p>Esta acci√≥n verificar√° la integridad de todas las tablas y restaurar√° los agentes de IA
                        faltantes.</p>
                    <button class="btn-primary w-100" style="margin-top: 20px;" onclick="app.ui.repairDatabase()">
                        INICIAR REPARACI√ìN
                    </button>
                </div>
                <div id="repair-running" class="hidden">
                    <i class="fas fa-cog fa-spin fa-4x" style="color: var(--primary-color); margin-bottom: 20px;"></i>
                    <p>Reconstruyendo esquemas y sincronizando agentes...</p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary w-100"
                    onclick="document.getElementById('repair-modal').classList.add('hidden')">
                    CANCELAR
                </button>
            </div>
        </div>
    </div>
    <footer id="main-footer" class="main-footer">
        <div id="footer-links-container" class="footer-content">
            <!-- Enlaces, Redes y Copyright se inyectan aqu√≠ para ser una sola barra -->
        </div>
    </footer>
    <!-- MODAL: PRODUCT (Cat√°logo) -->
    <div id="product-modal" class="modal-overlay hidden">
        <div class="modal-content minimalist-form" style="max-width: 550px;">
            <div class="modal-header">
                <h2><i class="fas fa-box"></i> Gestionar Producto / Servicio</h2>
                <button class="close-btn"
                    onclick="document.getElementById('product-modal').classList.add('hidden')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="form-product">
                    <input type="hidden" id="p-id">
                    <div class="form-row" style="display: flex; gap: 15px; margin-bottom: 10px;">
                        <div class="form-group" style="flex: 2;">
                            <label>Nombre del Producto *</label>
                            <input type="text" id="p-name" required placeholder="Ej: Hamburguesa Especial">
                        </div>
                        <div class="form-group" style="flex: 1;">
                            <label>Categor√≠a</label>
                            <input type="text" id="p-category" placeholder="Ej: Alimentos">
                        </div>
                    </div>
                    <div class="form-row" style="display: flex; gap: 15px; margin-bottom: 10px;">
                        <div class="form-group" style="flex: 1;">
                            <label>Precio Regular *</label>
                            <input type="number" id="p-price" step="0.01" required placeholder="0.00">
                        </div>
                        <div class="form-group" style="flex: 1;">
                            <label>Precio Oferta</label>
                            <input type="number" id="p-price-offer" step="0.01" placeholder="0.00">
                        </div>
                        <div class="form-group" style="flex: 1;">
                            <label>Unidad</label>
                            <input type="text" id="p-unit" placeholder="pza, kg, serv...">
                        </div>
                    </div>
                    <div class="form-row" style="display: flex; gap: 15px; margin-bottom: 10px;">
                        <div class="form-group" style="flex: 1;">
                            <label>Stock Actual</label>
                            <input type="number" id="p-stock" value="100">
                        </div>
                        <div class="form-group" style="flex: 1;">
                            <label>Es Combo?</label>
                            <select id="p-is-combo">
                                <option value="FALSE">No</option>
                                <option value="TRUE">S√≠</option>
                            </select>
                        </div>
                        <div class="form-group" style="flex: 1;">
                            <label>Estado</label>
                            <select id="p-active">
                                <option value="TRUE">Activo</option>
                                <option value="FALSE">Inactivo</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group" style="margin-bottom: 10px;">
                        <label>Descripci√≥n</label>
                        <textarea id="p-desc" style="height: 50px;"></textarea>
                    </div>
                    <div class="form-row" style="display: flex; gap: 15px; margin-bottom: 10px;">
                        <div class="form-group" style="flex: 1;">
                            <label>Etiqueta Promo</label>
                            <input type="text" id="p-promo-tag" placeholder="Ej: 2x1, Nuevo...">
                        </div>
                        <div class="form-group" style="flex: 1;">
                            <label>Media (Formatos)</label>
                            <input type="text" id="p-media" placeholder="png,mp4,pdf">
                        </div>
                    </div>
                    <div class="form-group" style="margin-bottom: 10px;">
                        <label>Contenido del Combo (JSON/Texto)</label>
                        <input type="text" id="p-combo-content" placeholder="Ej: Refresco + Papas">
                    </div>
                    <div class="form-group" style="margin-bottom: 10px;">
                        <label><i class="fas fa-link"></i> URL de Imagen Directa (Drive)</label>
                        <input type="url" id="p-image-url" placeholder="https://drive.google.com/...">
                    </div>
                    <div class="form-group" style="margin-bottom: 15px;">
                        <label><i class="fas fa-upload"></i> O Cargar Nueva Imagen</label>
                        <input type="file" id="p-file" accept="image/*"
                            style="padding: 8px; border: 1px dashed #ccc; border-radius: 8px; width: 100%;">
                    </div>
                    <div id="p-msg" class="msg-box hidden"></div>
                    <div class="modal-footer" style="padding: 10px 0 0 0;">
                        <button type="submit" class="btn-primary w-100" style="height: 45px; font-size: 1rem;">
                            <i class="fas fa-save"></i> GUARDAR PRODUCTO EN CAT√ÅLOGO
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</body>

</html>< ! - -   T r i g g e r   D e p l o y   - - > 
     
     